<div class="continuum-container">
  <div class="comparison-header">
    <h1><%= @exhibition.title %></h1>
    <p class="text-secondary mt-xs">
      Select the artwork you prefer
    </p>

    <div class="mt-md">
      <div class="comparison-counter">
        Comparisons: <%= @comparisons_count %> / 26 minimum
      </div>
    </div>
  </div>

  <% if @pair %>
    <div class="comparison-container" data-controller="comparison">
      <%= form_with url: compare_exhibition_path(@exhibition), method: :post, data: { comparison_target: 'form' } do |f| %>
        <%= f.hidden_field :winning_artwork_id, value: '', data: { comparison_target: 'winnerInput' } %>
        <%= f.hidden_field :losing_artwork_id, value: '', data: { comparison_target: 'loserInput' } %>

        <button type="button"
                class="comparison-artwork"
                data-action="click->comparison#selectWinner"
                data-winner-id="<%= @pair[0].id %>"
                data-loser-id="<%= @pair[1].id %>">
          <% if @pair[0].file.attached? %>
            <%= image_tag @pair[0].file, class: "comparison-image", alt: @pair[0].title %>
          <% end %>
        </button>

        <button type="button"
                class="comparison-artwork"
                data-action="click->comparison#selectWinner"
                data-winner-id="<%= @pair[1].id %>"
                data-loser-id="<%= @pair[0].id %>">
          <% if @pair[1].file.attached? %>
            <%= image_tag @pair[1].file, class: "comparison-image", alt: @pair[1].title %>
          <% end %>
        </button>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <h2>All pairs completed!</h2>
      <p class="my-md">
        You've seen all possible artwork pairs.
      </p>
      <%= link_to "Select Your Top 5 â†’", preferences_exhibition_path(@exhibition), class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
