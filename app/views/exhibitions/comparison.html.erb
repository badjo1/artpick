<div class="continuum-container">
  <div class="comparison-header">
    <h1><%= @exhibition.title %></h1>
    <p class="text-secondary mt-xs">
      Select the artwork you prefer
    </p>

    <div class="mt-md">
      <div class="comparison-counter">
        Comparisons: <%= @comparisons_count %> / <%= @exhibition.minimum_comparisons %> minimum
      </div>

      <% if @comparisons_count >= @exhibition.minimum_comparisons %>
        <p class="comparison-help-text text-secondary mt-sm">
          Hoe meer artworks je vergelijkt, hoe beter je keuze • Optimum <%= @exhibition.optimal_comparisons %> vergelijkingen
        </p>

        <div class="comparison-action mt-md">
          <%= link_to "Select Your Top 5 →", preferences_exhibition_path(@exhibition), class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>

  <% if @pair %>
    <div class="comparison-container" data-controller="comparison">
      <%= form_with url: compare_exhibition_path(@exhibition), method: :post, data: { comparison_target: 'form' } do |f| %>
        <%= f.hidden_field :winning_artwork_id, value: '', data: { comparison_target: 'winnerInput' } %>
        <%= f.hidden_field :losing_artwork_id, value: '', data: { comparison_target: 'loserInput' } %>

        <%= render 'comparison_artwork', artwork: @pair[0], opponent: @pair[1] %>
        <%= render 'comparison_artwork', artwork: @pair[1], opponent: @pair[0] %>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <h2>All pairs completed!</h2>
      <p class="my-md">
        You've seen all possible artwork pairs.
      </p>
      <%= link_to "Select Your Top 5 →", preferences_exhibition_path(@exhibition), class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
