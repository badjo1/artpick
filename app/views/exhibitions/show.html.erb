<div class="continuum-container">
  <header style="border-bottom: 1px solid var(--color-border); padding-bottom: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
    <h1><%= @exhibition.title %></h1>

    <div style="color: var(--color-text-secondary); margin: var(--spacing-sm) 0;">
      <%= @exhibition.space.name %>
      <% if @exhibition.start_date %>
        ‚Ä¢ <%= @exhibition.start_date.strftime("%B %Y") %>
        <% if @exhibition.end_date %>
          - <%= @exhibition.end_date.strftime("%B %Y") %>
        <% end %>
      <% end %>
    </div>

    <% if @exhibition.description.present? %>
      <p style="margin-top: var(--spacing-md); max-width: 800px;"><%= @exhibition.description %></p>
    <% end %>

    <div class="stats-grid" style="margin-top: var(--spacing-lg);">
      <div class="stat-card">
        <div class="stat-label">Artworks</div>
        <div class="stat-value"><%= @artworks_count %></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Comparisons</div>
        <div class="stat-value"><%= @comparisons_count %></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Status</div>
        <div class="stat-value" style="font-size: var(--font-size-base); text-transform: uppercase;">
          <%= @exhibition.status %>
        </div>
      </div>
    </div>

    <div style="margin-top: var(--spacing-lg); display: flex; gap: var(--spacing-sm); flex-wrap: wrap;">
      <%= link_to "View All Artworks ‚Üí", artworks_exhibition_path(@exhibition), class: "btn" %>
      <% if @exhibition.voting_open? %>
        <%= link_to "Start Voting ‚Üí", comparison_exhibition_path(@exhibition), class: "btn" %>
      <% end %>
      <% if @session_comparisons_count.to_i >= 26 %>
        <%= link_to "Select Your Top 5 ‚Üí", preferences_exhibition_path(@exhibition), class: "btn" %>
      <% end %>
      <% if @exhibition.luma_url.present? %>
        <%= link_to "Event Info ‚Üó", @exhibition.luma_url, class: "btn", target: "_blank", rel: "noopener" %>
      <% end %>
    </div>
  </header>

  <% if @top_artworks.any? %>
    <section style="margin-bottom: var(--spacing-xl);">
      <h2>üèÜ Publiekskeuze</h2>
      <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-lg);">
        Top 10 artworks based on global voting
      </p>
      <div class="artwork-grid">
        <% @top_artworks.each_with_index do |artwork, index| %>
          <%= render partial: "artworks/card", locals: { artwork: artwork, rank: index + 1 } %>
        <% end %>
      </div>
      <div style="margin-top: var(--spacing-lg);">
        <%= link_to "View Full Ranking ‚Üí", artworks_exhibition_path(@exhibition), class: "btn" %>
      </div>
    </section>
  <% end %>

  <% if @personal_top_artworks.present? && @has_voted %>
    <section style="margin-top: var(--spacing-xl); padding-top: var(--spacing-xl); border-top: 1px solid var(--color-border);">
      <h2>‚≠ê Jouw keuze</h2>
      <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-lg);">
        Your personal top 5 based on your voting behavior
        ‚Ä¢ <span style="font-size: var(--font-size-sm);">Only visible to you in this session</span>
      </p>
      <div class="artwork-grid" style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));">
        <% @personal_top_artworks.first(5).each_with_index do |artwork, index| %>
          <%= render partial: "artworks/card", locals: { artwork: artwork, rank: index + 1, personal: true } %>
        <% end %>
      </div>
      <div style="margin-top: var(--spacing-lg);">
        <%= link_to "Adjust Your Top 5 ‚Üí", preferences_exhibition_path(@exhibition), class: "btn btn-primary" %>
      </div>
    </section>
  <% end %>
</div>
