<div class="continuum-container">
  <header class="section-header">
    <h1><%= @exhibition.title %></h1>

    <div class="meta-info">
      <%= @exhibition.space.name %>
      <% if @exhibition.start_date %>
        ‚Ä¢ <%= @exhibition.start_date.strftime("%B %Y") %>
        <% if @exhibition.end_date %>
          - <%= @exhibition.end_date.strftime("%B %Y") %>
        <% end %>
      <% end %>
    </div>

    <% if @exhibition.description.present? %>
      <p class="description-text"><%= @exhibition.description %></p>
    <% end %>

    <div class="stats-grid stats-grid-spacing">
      <div class="stat-card">
        <div class="stat-label">Artworks</div>
        <div class="stat-value"><%= @artworks_count %></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Comparisons</div>
        <div class="stat-value"><%= @comparisons_count %></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Status</div>
        <div class="stat-value status-text-size">
          <%= @exhibition.status %>
        </div>
      </div>
    </div>

    <div class="button-group">
      <%= link_to "View All Artworks ‚Üí", artworks_exhibition_path(@exhibition), class: "btn" %>
      <% if @exhibition.exhibition_media.any? %>
        <%= link_to "Exhibition Photos üì∏", media_exhibition_path(@exhibition), class: "btn" %>
      <% end %>
      <% if @exhibition.voting_open? %>
        <%= link_to "Start Voting ‚Üí", comparison_exhibition_path(@exhibition), class: "btn" %>
      <% end %>
      <% if @session_comparisons_count.to_i >= @exhibition.minimum_comparisons %>
        <%= link_to "Select Your Top 5 ‚Üí", preferences_exhibition_path(@exhibition), class: "btn" %>
      <% end %>
      <% if @exhibition.luma_url.present? %>
        <%= link_to "Event Info ‚Üó", @exhibition.luma_url, class: "btn", target: "_blank", rel: "noopener" %>
      <% end %>
    </div>
  </header>

  <% if @top_artworks.any? %>
    <section class="section-spacing">
      <h2>üèÜ Publiekskeuze</h2>
      <p class="text-secondary mb-lg">
        Top 10 artworks based on global voting
      </p>
      <div class="artwork-grid">
        <% @top_artworks.each_with_index do |artwork, index| %>
          <%= render partial: "artworks/card", locals: { artwork: artwork, rank: index + 1 } %>
        <% end %>
      </div>
      <div class="action-spacing">
        <%= link_to "View Full Ranking ‚Üí", artworks_exhibition_path(@exhibition), class: "btn" %>
      </div>
    </section>
  <% end %>

  <% if @personal_top_artworks.present? && @has_voted %>
    <section class="section-divider">
      <h2>‚≠ê Jouw keuze</h2>
      <p class="text-secondary mb-lg">
        Your personal top 5 based on your voting behavior
        ‚Ä¢ <span class="small-text">Only visible to you in this session</span>
      </p>
      <div class="artwork-grid personal-grid">
        <% @personal_top_artworks.first(5).each_with_index do |artwork, index| %>
          <%= render partial: "artworks/card", locals: { artwork: artwork, rank: index + 1, personal: true } %>
        <% end %>
      </div>
      <div class="action-spacing">
        <%= link_to "Adjust Your Top 5 ‚Üí", preferences_exhibition_path(@exhibition), class: "btn btn-primary" %>
      </div>
    </section>
  <% end %>
</div>
