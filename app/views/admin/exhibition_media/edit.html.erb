<div class="admin-container">
  <div class="admin-header">
    <h1>Edit Media</h1>
    <%= link_to "â† Back to Media", admin_exhibition_exhibition_media_path(@exhibition), class: "btn btn-secondary" %>
  </div>

  <div class="form-container">
    <%= form_with model: [:admin, @exhibition, @exhibition_medium], local: true, data: { turbo: false } do |form| %>
      <% if @exhibition_medium.errors.any? %>
        <div class="alert alert-error" style="margin-bottom: var(--spacing-lg);">
          <strong><%= pluralize(@exhibition_medium.errors.count, "error") %> prohibited this media from being saved:</strong>
          <ul style="margin-top: var(--spacing-xs); padding-left: var(--spacing-md);">
            <% @exhibition_medium.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <% if @exhibition_medium.file.attached? %>
        <div class="form-group">
          <% if @exhibition_medium.file.content_type.start_with?("video") %>
            <%= video_tag url_for(@exhibition_medium.file), controls: true, preload: "metadata", class: "form-preview-image" %>
            <p class="text-secondary">Current video</p>
          <% else %>
            <%= image_tag @exhibition_medium.file, class: "form-preview-image", alt: "Current photo" %>
            <p class="text-secondary">Current photo</p>
          <% end %>
        </div>
      <% end %>

      <div class="form-group">
        <%= form.label :file, "Replace File (optional)" %>
        <%= form.file_field :file, accept: "image/jpeg,image/png,image/gif,image/webp,video/mp4", class: "form-control" %>
        <small class="form-help">Leave blank to keep current file</small>
      </div>

      <div class="form-group">
        <%= form.label :caption, "Caption" %>
        <%= form.text_area :caption, rows: 3, class: "form-control", placeholder: "Enter photo caption..." %>
      </div>

      <div class="form-group">
        <%= form.label :photographer, "Photographer" %>
        <%= form.text_field :photographer, class: "form-control", placeholder: "Photographer name..." %>
      </div>

      <div class="form-group">
        <%= form.label :position, "Position" %>
        <%= form.number_field :position, class: "form-control", placeholder: "Display order..." %>
        <small class="form-help">Controls the display order in the gallery</small>
      </div>

      <div class="form-actions">
        <%= form.submit "Save Changes", class: "btn btn-primary" %>
        <%= link_to "Cancel", admin_exhibition_exhibition_media_path(@exhibition), class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>
