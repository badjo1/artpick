<div class="continuum-container">
  <div class="admin-header">
    <h1>Admin Dashboard</h1>
    <div>
      <%= link_to "View Site", root_path, class: "btn" %>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">Exhibitions</div>
      <div class="stat-value"><%= @total_exhibitions %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Artworks</div>
      <div class="stat-value"><%= @total_artworks %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Artists</div>
      <div class="stat-value"><%= @total_artists %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Comparisons</div>
      <div class="stat-value"><%= @total_comparisons %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Preferences</div>
      <div class="stat-value"><%= @total_preferences %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Sessions (24h)</div>
      <div class="stat-value"><%= @active_sessions_count %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Check-Ins</div>
      <div class="stat-value"><%= @total_check_ins %></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Spaces</div>
      <div class="stat-value"><%= @total_spaces %></div>
    </div>
  </div>

  <% if @active_exhibitions.any? %>
    <section style="margin-top: var(--spacing-xl);">
      <h2>Active Exhibitions</h2>
      <div class="exhibition-grid" style="margin-top: var(--spacing-md);">
        <% @active_exhibitions.each do |exhibition| %>
          <div class="exhibition-card">
            <h3><%= link_to exhibition.title, admin_exhibition_path(exhibition.id) %></h3>
            <div class="exhibition-meta"><%= exhibition.space.name %></div>
            <div class="exhibition-meta" style="margin-top: var(--spacing-sm);">
              <%= pluralize(exhibition.artworks.count, "artwork") %>
              • <%= pluralize(exhibition.comparisons.count, "comparison") %>
            </div>
            <div style="margin-top: var(--spacing-sm);">
              <%= link_to "Manage Artworks", admin_exhibition_artworks_path(exhibition.id), class: "btn btn-small" %>
              <%= link_to "Analytics", admin_exhibition_analytics_path(exhibition.id), class: "btn btn-small" %>
            </div>
          </div>
        <% end %>
      </div>
    </section>
  <% end %>

  <section style="margin-top: var(--spacing-xl);">
    <h2>Recent Activity</h2>
    <table class="continuum-table" style="margin-top: var(--spacing-md);">
      <thead>
        <tr>
          <th>Action</th>
          <th>Exhibition</th>
          <th>Details</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        <% @recent_check_ins.each do |check_in| %>
          <tr>
            <td><%= check_in.action_type.upcase %></td>
            <td>
              <% if check_in.exhibition %>
                <%= link_to check_in.exhibition.title, admin_exhibition_path(check_in.exhibition.id) %>
              <% else %>
                —
              <% end %>
            </td>
            <td>
              <% if check_in.checkable_type == "Comparison" %>
                Comparison #<%= check_in.checkable_id %>
              <% elsif check_in.checkable_type == "Exhibition" %>
                <%= check_in.checkable.title %>
              <% else %>
                <%= check_in.checkable_type %>
              <% end %>
            </td>
            <td><%= time_ago_in_words(check_in.created_at) %> ago</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
</div>
